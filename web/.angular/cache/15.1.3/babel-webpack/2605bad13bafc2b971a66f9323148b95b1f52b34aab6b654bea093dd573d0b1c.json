{"ast":null,"code":"import { Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../api-provider.service\";\nexport class PostsService {\n  constructor(apiProvider) {\n    this.apiProvider = apiProvider;\n    this.posts = [];\n    this.postsSubject = new Subject();\n  }\n  getPosts() {\n    this.apiProvider.getPosts().subscribe(res => {\n      this.posts = res;\n      this.postsSubject.next([...this.posts]);\n    });\n    return this.postsSubject;\n  }\n  addPost(post) {\n    post.timestamp = new Date();\n    this.apiProvider.addPost(post).subscribe(res => {\n      this.posts.push({\n        ...post,\n        id: res.name\n      });\n      this.postsSubject.next([...this.posts]);\n    });\n  }\n  editPost(post) {\n    this.apiProvider.editPost(post).subscribe(res => {\n      this.posts[this.posts.findIndex(p => p.id == post.id)] = post;\n      this.postsSubject.next([...this.posts]);\n    });\n  }\n  deletePost(id) {\n    this.apiProvider.deletePost(id).subscribe(res => {\n      this.posts = this.posts.filter(post => post.id != id);\n      this.postsSubject.next([...this.posts]);\n    });\n  }\n}\nPostsService.ɵfac = function PostsService_Factory(t) {\n  return new (t || PostsService)(i0.ɵɵinject(i1.ApiProviderService));\n};\nPostsService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: PostsService,\n  factory: PostsService.ɵfac,\n  providedIn: 'root'\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}